---
layout: post
title:  "Linux ile Modül Programlama"
date:   2014-09-29 21:51:27
categories: [linux]
tags: [linux]
---
Modüller çekirdek için yazılan programlardır. User space olarak tanımladığımız ve hergün kullandığımız işletim sisteminin bir alt katmanıdır. Kısacası linux çekirdeğinin içidir. Bizde burada çalışan bir "Hello World" uygulaması yapıcaz.

1) Aşağıdaki gibi "<b>/home</b>" dizininde <b>denemeler</b> adlı bir klasör oluşturun.

<br>![Resim](/images/16-1.png)<br>

2) Terminale "<b>cd denemeler</b>" yazarak dizine girin ve "<b>pico</b>" editörüyle "<b>hello.c</b>" dosyası oluşturun.

<br>![Resim](/images/16-2.png)<br>

3) İçerisine aşağıdaki kodları yazın. Dosyayı kaydetmek için "<b>CTRL + X</b>" kombinasyonuyla çıkış yapın size kaydetmek istermisiniz diye sorduğunda "<b>E</b>" ya da "<b>Y</b>" tuşlarına basarsınız.

<br>![Resim](/images/16-3.png)<br>

4) Az önceki "<b>C</b>" kodunun çalışması için bir "<b>Makefile</b>" dosyası lazım      "<b>pico Makefile</b>" ile oluşturun.

<br>![Resim](/images/16-4.png)<br>

5) İçerisine tıpkı aşağıdaki gibi yazın eger all ve clean kısımlarından sonra "<b>TAB</b>" ile boşluk bırakmazsanız hata alırsınız dikkat edin. Dosyayı kaydetmek için "<b>CTRL + X</b>" kombinasyonuyla çıkış yapın size kaydetmek istermisiniz diye sorduğunda "<b>E</b>" ya da "<b>Y</b>" tuşlarına basarsınız.

<br>![Resim](/images/16-5.png)<br>

6) Terminale "<b>make</b>" yazın ve kodunuzu derleyin. Eğer make komutunu çalıştıran program yoksa "<b>sudo apt-get install make</b>" yazarak yükleyebilirsiniz.

<br>![Resim](/images/16-6.png)<br>

7) Terminale "<b>ls</b>" yazın ve klasörün içerisinde <b>hello.ko</b> oluşmuş mu ona bakın. Eğer oluştuysa "<b>sudo insmod hello.ko</b>" yazarak modülü çekirdeğe yükleyebilirsiniz. Yüklediğinizde kodun içindeki print ifadelerinin barındırdığı string "<b>log</b>" dosyalarına yazılır. Neden diye sorarsanız print komutunda <b>KERN_INFO</b> ile belirttiğiniz için. Sonra terminale "<b>dmesg</b>" komutu girerseniz bütün logları görüntüleyebilirsiniz.
<br>![Resim](/images/16-7.png)<br>

8) Görüldüğü gibi "<b>Hello World</b>" yazısı çıkıyor.

<br>![Resim](/images/16-8.png)<br>



9) Terminale "<b>sudo rmmod hello.ko</b>" yazarsanız modülü kaldırır ve log kısmına "<b>Goodby World</b>" yazar.

Kolay gelsin.